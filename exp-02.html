<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KG-R1</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #f5f5f0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        
        #canvas-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        svg {
            max-width: 90vw;
            max-height: 90vh;
            height: auto;
        }
        
        .play-btn {
            position: absolute;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border: 1px solid #333;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s;
            z-index: 100;
        }
        
        .play-btn:hover {
            background: #333;
            color: white;
        }
        
        .play-btn.playing {
            background: #333;
            color: white;
        }
        
        .viz-bar {
            position: absolute;
            bottom: 30px;
            right: 90px;
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 40px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .viz-bar.active {
            opacity: 1;
        }
        
        .exp-label {
            position: absolute;
            bottom: 30px;
            left: 30px;
            font-family: 'Courier New', monospace;
            font-size: 9px;
            letter-spacing: 0.15em;
            color: #999;
        }
        
        .bar {
            width: 4px;
            background: #333;
            transition: height 0.1s;
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <!-- SVG Speaker Front View - Exact from reference, horn removed, height reduced -->
        <svg width="600" height="800" viewBox="0 0 600 800" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Cabinet Outline -->
            <rect x="50" y="40" width="500" height="720" stroke="#0D0D0D" stroke-width="2" fill="none"/>
            
            <!-- Vertical Divider Lines (Left/Right panels) -->
            <line x1="100" y1="40" x2="100" y2="760" stroke="#0D0D0D" stroke-width="1.5"/>
            <line x1="500" y1="40" x2="500" y2="760" stroke="#0D0D0D" stroke-width="1.5"/>
            
            <!-- Side View Lines (curved sides as per SVG) -->
            <path d="M50 40 Q150 80 300 80 Q450 80 550 40" stroke="#0D0D0D" stroke-width="1.5" fill="none"/>
            <path d="M50 760 Q150 720 300 720 Q450 720 550 760" stroke="#0D0D0D" stroke-width="1.5" fill="none"/>
            
            <!-- WOOFER - Large Center Circle -->
            <!-- Outer frame -->
            <circle cx="300" cy="400" r="180" stroke="#0D0D0D" stroke-width="2" fill="none"/>
            
            <!-- Concentric rings per SVG -->
            <circle cx="300" cy="400" r="165" stroke="#0D0D0D" stroke-width="1.5" fill="none"/>
            <circle cx="300" cy="400" r="150" stroke="#0D0D0D" stroke-width="1.5" fill="none"/>
            <circle cx="300" cy="400" r="120" stroke="#0D0D0D" stroke-width="1" fill="none"/>
            
            <!-- Dust cap (center dome) -->
            <circle cx="300" cy="400" r="50" stroke="#0D0D0D" stroke-width="1.5" fill="none"/>
            <circle cx="300" cy="400" r="35" stroke="#0D0D0D" stroke-width="1" fill="none"/>
            
            <!-- Screws - Four Corners -->
            <!-- Top Left -->
            <circle cx="75" cy="65" r="8" stroke="#0D0D0D" stroke-width="1.5" fill="white"/>
            <line x1="71" y1="65" x2="79" y2="65" stroke="#0D0D0D" stroke-width="1"/>
            <line x1="75" y1="61" x2="75" y2="69" stroke="#0D0D0D" stroke-width="1"/>
            
            <!-- Top Right -->
            <circle cx="525" cy="65" r="8" stroke="#0D0D0D" stroke-width="1.5" fill="white"/>
            <line x1="521" y1="65" x2="529" y2="65" stroke="#0D0D0D" stroke-width="1"/>
            <line x1="525" y1="61" x2="525" y2="69" stroke="#0D0D0D" stroke-width="1"/>
            
            <!-- Bottom Left -->
            <circle cx="75" cy="735" r="8" stroke="#0D0D0D" stroke-width="1.5" fill="white"/>
            <line x1="71" y1="735" x2="79" y2="735" stroke="#0D0D0D" stroke-width="1"/>
            <line x1="75" y1="731" x2="75" y2="739" stroke="#0D0D0D" stroke-width="1"/>
            
            <!-- Bottom Right -->
            <circle cx="525" cy="735" r="8" stroke="#0D0D0D" stroke-width="1.5" fill="white"/>
            <line x1="521" y1="735" x2="529" y2="735" stroke="#0D0D0D" stroke-width="1"/>
            <line x1="525" y1="731" x2="525" y2="739" stroke="#0D0D0D" stroke-width="1"/>
            
            <!-- Additional screws per SVG style -->
            <!-- Center Left/Right -->
            <circle cx="75" cy="400" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            <circle cx="525" cy="400" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            
            <!-- Top/Bottom Center -->
            <circle cx="300" cy="65" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            <circle cx="300" cy="735" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            
            <!-- Mid positions -->
            <circle cx="75" cy="220" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            <circle cx="525" cy="220" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            <circle cx="75" cy="580" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            <circle cx="525" cy="580" r="6" stroke="#0D0D0D" stroke-width="1" fill="white"/>
            
            <!-- Rear Panel Indicators (small marks at bottom) -->
            <rect x="260" y="700" width="80" height="20" stroke="#0D0D0D" stroke-width="1" fill="none"/>
            <line x1="270" y1="710" x2="330" y2="710" stroke="#0D0D0D" stroke-width="0.5"/>
            <line x1="275" y1="715" x2="325" y2="715" stroke="#0D0D0D" stroke-width="0.5"/>
            
            <!-- Stand/Base at bottom -->
            <rect x="80" y="760" width="440" height="15" stroke="#0D0D0D" stroke-width="1.5" fill="none"/>
            <rect x="100" y="775" width="400" height="20" stroke="#0D0D0D" stroke-width="1" fill="none"/>
            
            <!-- Stand feet -->
            <rect x="90" y="795" width="30" height="5" stroke="#0D0D0D" stroke-width="1" fill="none"/>
            <rect x="480" y="795" width="30" height="5" stroke="#0D0D0D" stroke-width="1" fill="none"/>
        </svg>
    </div>
    
    <button class="play-btn" id="playBtn">▶</button>
    
    <div class="viz-bar" id="vizBar">
        <div class="bar" style="height: 10px"></div>
        <div class="bar" style="height: 20px"></div>
        <div class="bar" style="height: 15px"></div>
        <div class="bar" style="height: 25px"></div>
        <div class="bar" style="height: 18px"></div>
    </div>
    
    <div class="exp-label">emote.bot.exp(02)</div>

    <script>
        // ===== PROCEDURAL AUDIO =====
        const playBtn = document.getElementById('playBtn');
        const vizBar = document.getElementById('vizBar');
        const bars = document.querySelectorAll('.bar');
        let isPlaying = false;
        let audioCtx = null;
        let musicInterval = null;
        
        const chords = [
            [261.63, 329.63, 392.00, 493.88],
            [293.66, 349.23, 440.00, 523.25],
            [392.00, 493.88, 587.33, 698.46],
            [349.23, 440.00, 523.25, 659.25],
            [220.00, 261.63, 329.63, 392.00],
        ];
        
        const bassNotes = [130.81, 146.83, 98.00, 116.54, 110.00];
        
        function createChillJazzChord() {
            if (!audioCtx) return;
            
            const chord = chords[Math.floor(Math.random() * chords.length)];
            const bass = bassNotes[Math.floor(Math.random() * bassNotes.length)];
            
            chord.forEach((freq) => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                
                osc.type = 'sine';
                osc.frequency.value = freq;
                
                filter.type = 'lowpass';
                filter.frequency.value = 800;
                filter.Q.value = 1;
                
                gain.gain.setValueAtTime(0, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0.08, audioCtx.currentTime + 1);
                gain.gain.exponentialRampToValueAtTime(0.02, audioCtx.currentTime + 4);
                
                osc.connect(filter);
                filter.connect(gain);
                gain.connect(audioCtx.destination);
                
                osc.start();
                osc.stop(audioCtx.currentTime + 5);
            });
            
            const bassOsc = audioCtx.createOscillator();
            const bassGain = audioCtx.createGain();
            const bassFilter = audioCtx.createBiquadFilter();
            
            bassOsc.type = 'triangle';
            bassOsc.frequency.value = bass;
            
            bassFilter.type = 'lowpass';
            bassFilter.frequency.value = 400;
            
            bassGain.gain.setValueAtTime(0, audioCtx.currentTime);
            bassGain.gain.linearRampToValueAtTime(0.15, audioCtx.currentTime + 0.5);
            bassGain.gain.exponentialRampToValueAtTime(0.05, audioCtx.currentTime + 3);
            
            bassOsc.connect(bassFilter);
            bassFilter.connect(bassGain);
            bassGain.connect(audioCtx.destination);
            
            bassOsc.start();
            bassOsc.stop(audioCtx.currentTime + 4);
        }
        
        async function startMusic() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') {
                await audioCtx.resume();
            }
            createChillJazzChord();
            musicInterval = setInterval(() => {
                if (isPlaying && audioCtx) {
                    createChillJazzChord();
                }
            }, 3500 + Math.random() * 2000);
        }
        
        function stopMusic() {
            if (musicInterval) {
                clearInterval(musicInterval);
                musicInterval = null;
            }
            if (audioCtx) {
                audioCtx.close();
                audioCtx = null;
            }
        }
        
        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                stopMusic();
                playBtn.textContent = '▶';
                playBtn.classList.remove('playing');
                vizBar.classList.remove('active');
            } else {
                startMusic();
                playBtn.textContent = '⏸';
                playBtn.classList.add('playing');
                vizBar.classList.add('active');
            }
            isPlaying = !isPlaying;
        });
        
        function animateViz() {
            if (isPlaying) {
                bars.forEach(bar => {
                    bar.style.height = (8 + Math.random() * 30) + 'px';
                });
            }
            setTimeout(animateViz, 150);
        }
        animateViz();
    </script>
</body>
</html>